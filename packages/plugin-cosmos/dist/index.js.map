{"version":3,"sources":["../src/actions/transfer/index.ts","../src/shared/entities/cosmos-wallet-chains-data.ts","../src/shared/entities/cosmos-wallet.ts","../src/shared/helpers/cosmos-chains.ts","../src/providers/wallet/utils.ts","../src/templates/index.ts","../src/actions/transfer/services/cosmos-transfer-action-service.ts","../src/shared/helpers/cosmos-transaction-receipt.ts","../src/shared/services/cosmos-transaction-fee-estimator.ts","../src/shared/helpers/cosmos-assets.ts","../src/providers/wallet/index.ts","../src/index.ts"],"sourcesContent":["import {\n    composeContext,\n    generateObjectDeprecated,\n    HandlerCallback,\n    IAgentRuntime,\n    Memory,\n    ModelClass,\n    State,\n} from \"@elizaos/core\";\nimport { initWalletChainsData } from \"../../providers/wallet/utils\";\nimport { cosmosTransferTemplate } from \"../../templates\";\nimport { CosmosTransferActionService } from \"./services/cosmos-transfer-action-service\";\nimport type { CosmosTransferParams } from \"./types\";\nimport type {\n    ICosmosPluginOptions,\n    ICosmosWalletChains,\n} from \"../../shared/interfaces\";\n\nexport const createTransferAction = (pluginOptions: ICosmosPluginOptions) => ({\n    name: \"COSMOS_TRANSFER\",\n    description: \"Transfer tokens between addresses on the same chain\",\n    handler: async (\n        _runtime: IAgentRuntime,\n        _message: Memory,\n        state: State,\n        _options: { [key: string]: unknown },\n        _callback?: HandlerCallback\n    ) => {\n        const cosmosTransferContext = composeContext({\n            state: state,\n            template: cosmosTransferTemplate,\n            templatingEngine: \"handlebars\",\n        });\n\n        const cosmosTransferContent = await generateObjectDeprecated({\n            runtime: _runtime,\n            context: cosmosTransferContext,\n            modelClass: ModelClass.SMALL,\n        });\n\n        const paramOptions: CosmosTransferParams = {\n            chainName: cosmosTransferContent.chainName,\n            symbol: cosmosTransferContent.symbol,\n            amount: cosmosTransferContent.amount,\n            toAddress: cosmosTransferContent.toAddress,\n        };\n\n        try {\n            const walletProvider: ICosmosWalletChains =\n                await initWalletChainsData(_runtime);\n\n            const action = new CosmosTransferActionService(walletProvider);\n\n            const customAssets = (pluginOptions?.customChainData ?? []).map(\n                (chainData) => chainData.assets\n            );\n\n            const transferResp = await action.execute(\n                paramOptions,\n                customAssets\n            );\n\n            if (_callback) {\n                await _callback({\n                    text: `Successfully transferred ${paramOptions.amount} tokens to ${paramOptions.toAddress}\\nGas paid: ${transferResp.gasPaid}\\nTransaction Hash: ${transferResp.txHash}`,\n                    content: {\n                        success: true,\n                        hash: transferResp.txHash,\n                        amount: paramOptions.amount,\n                        recipient: transferResp.to,\n                        chain: cosmosTransferContent.fromChain,\n                    },\n                });\n\n                const newMemory: Memory = {\n                    userId: _message.agentId,\n                    agentId: _message.agentId,\n                    roomId: _message.roomId,\n                    content: {\n                        text: `Transaction ${paramOptions.amount} ${paramOptions.symbol} to address ${paramOptions.toAddress} on chain ${paramOptions.toAddress} was successfully transfered.\\n Gas paid: ${transferResp.gasPaid}. Tx hash: ${transferResp.txHash}`,\n                    },\n                };\n\n                await _runtime.messageManager.createMemory(newMemory);\n            }\n            return true;\n        } catch (error) {\n            console.error(\"Error during token transfer:\", error);\n\n            if (_callback) {\n                await _callback({\n                    text: `Error transferring tokens: ${error.message}`,\n                    content: { error: error.message },\n                });\n            }\n\n            const newMemory: Memory = {\n                userId: _message.agentId,\n                agentId: _message.agentId,\n                roomId: _message.roomId,\n                content: {\n                    text: `Transaction ${paramOptions.amount} ${paramOptions.symbol} to address ${paramOptions.toAddress} on chain ${paramOptions.toAddress} was unsuccessful.`,\n                },\n            };\n\n            await _runtime.messageManager.createMemory(newMemory);\n\n            return false;\n        }\n    },\n    template: cosmosTransferTemplate,\n    validate: async (runtime: IAgentRuntime) => {\n        const mnemonic = runtime.getSetting(\"COSMOS_RECOVERY_PHRASE\");\n        const availableChains = runtime.getSetting(\"COSMOS_AVAILABLE_CHAINS\");\n        const availableChainsArray = availableChains?.split(\",\");\n\n        return !(mnemonic && availableChains && availableChainsArray.length);\n    },\n    examples: [\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"Make transfer {{0.0001 OM}} to {{mantra1pcnw46km8m5amvf7jlk2ks5std75k73aralhcf}} on {{mantrachaintestnet2}}\",\n                    action: \"COSMOS_TRANSFER\",\n                },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"Do you confirm the transfer action?\",\n                    action: \"COSMOS_TRANSFER\",\n                },\n            },\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"Yes\",\n                    action: \"COSMOS_TRANSFER\",\n                },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"\",\n                    action: \"COSMOS_TRANSFER\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"Send {{10 OSMO}} to {{osmo13248w8dtnn07sxc3gq4l3ts4rvfyat6f4qkdd6}} on {{osmosistestnet}}\",\n                    action: \"COSMOS_TRANSFER\",\n                },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"Do you confirm the transfer action?\",\n                    action: \"COSMOS_TRANSFER\",\n                },\n            },\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"Yes\",\n                    action: \"COSMOS_TRANSFER\",\n                },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"\",\n                    action: \"COSMOS_TRANSFER\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"Send {{0.0001 OM}} on {{mantrachaintestnet2}} to {{mantra1pcnw46km8m5amvf7jlk2ks5std75k73aralhcf}}.\",\n                    action: \"COSMOS_TRANSFER\",\n                },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"Do you confirm the transfer action?\",\n                    action: \"COSMOS_TRANSFER\",\n                },\n            },\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"Yes\",\n                    action: \"COSMOS_TRANSFER\",\n                },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"\",\n                    action: \"COSMOS_TRANSFER\",\n                },\n            },\n        ],\n    ],\n    similes: [\n        \"COSMOS_SEND_TOKENS\",\n        \"COSMOS_TOKEN_TRANSFER\",\n        \"COSMOS_MOVE_TOKENS\",\n    ],\n});\n","import { getChainByChainName } from \"@chain-registry/utils\";\nimport { SigningCosmWasmClient } from \"@cosmjs/cosmwasm-stargate\";\nimport { chains } from \"chain-registry\";\nimport { CosmosWallet } from \"./cosmos-wallet\";\nimport type {\n    ICosmosPluginCustomChainData,\n    ICosmosWalletChains,\n    ICosmosWalletChainsData,\n} from \"../interfaces\";\nimport { getAvailableChains } from \"../helpers/cosmos-chains\";\n\nexport class CosmosWalletChains implements ICosmosWalletChains {\n    public walletChainsData: ICosmosWalletChainsData = {};\n\n    private constructor(walletChainsData: ICosmosWalletChainsData) {\n        this.walletChainsData = walletChainsData;\n    }\n\n    public static async create(\n        mnemonic: string,\n        availableChainNames: string[],\n        customChainsData?: ICosmosPluginCustomChainData[\"chainData\"][]\n    ) {\n        const walletChainsData: ICosmosWalletChainsData = {};\n        const availableChains = getAvailableChains(chains, customChainsData);\n\n        for (const chainName of availableChainNames) {\n            const chain = getChainByChainName(availableChains, chainName);\n\n            if (!chain) {\n                throw new Error(`Chain ${chainName} not found`);\n            }\n\n            const wallet = await CosmosWallet.create(\n                mnemonic,\n                chain.bech32_prefix,\n                chain.apis.rpc[0].address\n            );\n\n            const chainRpcAddress = chain.apis?.rpc?.[0].address;\n\n            if (!chainRpcAddress) {\n                throw new Error(`RPC address not found for chain ${chainName}`);\n            }\n\n            const signingCosmWasmClient =\n                await SigningCosmWasmClient.connectWithSigner(\n                    chain.apis.rpc[0].address,\n                    wallet.directSecp256k1HdWallet\n                );\n\n            walletChainsData[chainName] = {\n                wallet,\n                signingCosmWasmClient,\n            };\n        }\n\n        return new CosmosWalletChains(walletChainsData);\n    }\n\n    public async getWalletAddress(chainName: string) {\n        return await this.walletChainsData[chainName].wallet.getWalletAddress();\n    }\n\n    public getSigningCosmWasmClient(chainName: string) {\n        return this.walletChainsData[chainName].signingCosmWasmClient;\n    }\n}\n","import { DirectSecp256k1HdWallet } from \"@cosmjs/proto-signing\";\nimport { cosmos } from \"interchain\";\nimport type { ICosmosWallet } from \"../interfaces\";\n\ntype RPCQueryClient = Awaited<\n    ReturnType<typeof cosmos.ClientFactory.createRPCQueryClient>\n>;\n\nexport class CosmosWallet implements ICosmosWallet {\n    public rpcQueryClient: RPCQueryClient;\n    public directSecp256k1HdWallet: DirectSecp256k1HdWallet;\n\n    private constructor(\n        directSecp256k1HdWallet: DirectSecp256k1HdWallet,\n        rpcQueryClient: RPCQueryClient\n    ) {\n        this.directSecp256k1HdWallet = directSecp256k1HdWallet;\n        this.rpcQueryClient = rpcQueryClient;\n    }\n\n    public static async create(\n        mnemonic: string,\n        chainPrefix: string,\n        rpcEndpoint: string\n    ) {\n        const directSecp256k1HdWallet =\n            await DirectSecp256k1HdWallet.fromMnemonic(mnemonic, {\n                prefix: chainPrefix,\n            });\n\n        const rpcQueryClient = await cosmos.ClientFactory.createRPCQueryClient({\n            rpcEndpoint,\n        });\n\n        return new CosmosWallet(directSecp256k1HdWallet, rpcQueryClient);\n    }\n\n    public async getWalletAddress() {\n        const [account] = await this.directSecp256k1HdWallet.getAccounts();\n\n        return account.address;\n    }\n\n    public async getWalletBalances() {\n        const walletAddress = await this.getWalletAddress();\n\n        const allBalances =\n            await this.rpcQueryClient.cosmos.bank.v1beta1.allBalances({\n                address: walletAddress,\n            });\n\n        return allBalances.balances;\n    }\n}\n","import type { Chain } from \"@chain-registry/types\";\n\nexport const getAvailableChains = (chains: Chain[], customChains: Chain[]) => [\n    ...(chains?.filter(\n        (chain) =>\n            !(customChains ?? [])\n                ?.map((customChain) => customChain.chain_name)\n                ?.includes(chain.chain_name)\n    ) ?? []),\n    ...(customChains ?? []),\n];\n","import { IAgentRuntime } from \"@elizaos/core\";\nimport { CosmosWalletChains } from \"../../shared/entities/cosmos-wallet-chains-data\";\n\nexport const initWalletChainsData = async (runtime: IAgentRuntime) => {\n    const mnemonic = runtime.getSetting(\"COSMOS_RECOVERY_PHRASE\");\n    const availableChains = runtime.getSetting(\"COSMOS_AVAILABLE_CHAINS\");\n\n    if (!mnemonic) {\n        throw new Error(\"COSMOS_RECOVERY_PHRASE is missing\");\n    }\n\n    if (!availableChains) {\n        throw new Error(\"COSMOS_AVAILABLE_CHAINS is missing\");\n    }\n\n    const availableChainsArray = availableChains.split(\",\");\n\n    if (!availableChainsArray.length) {\n        throw new Error(\"COSMOS_AVAILABLE_CHAINS is empty\");\n    }\n\n    return await CosmosWalletChains.create(mnemonic, availableChainsArray);\n};\n","export const cosmosTransferTemplate = `Given the recent messages and cosmos wallet information below:\n{{recentMessages}}\n{{walletInfo}}\nExtract the following information about the requested transfer:\n1. **Amount**:\n   - Extract only the numeric value from the instruction.\n   - The value must be a string representing the amount in the display denomination (e.g., \"0.0001\" for OM, chimba, etc.). Do not include the symbol.\n\n2. **Recipient Address**:\n   - Must be a valid Bech32 address that matches the chain's address prefix.\n   - Example for \"mantra\": \"mantra1pcnw46km8m5amvf7jlk2ks5std75k73aralhcf\".\n\n3. **Token Symbol**:\n   - The symbol must be a string representing the token's display denomination (e.g., \"OM\", \"chimba\", etc.).\n\n4. **Chain name**:\n   - Identify the chain mentioned in the instruction where the transfer will take place (e.g., carbon, axelar, mantrachaintestnet2).\n   - Provide this as a string.\n\nRespond with a JSON markdown block containing only the extracted values. All fields except 'token' are required:\n\\`\\`\\`json\n{\n    \"symbol\": string, // The symbol of token.\n    \"amount\": string, // The amount to transfer as a string.\n    \"toAddress\": string, // The recipient's address.\n    \"chainName\": string // The chain name.\n\\`\\`\\`\n\nExample reponse for the input: \"Make transfer 0.0001 OM to mantra1pcnw46km8m5amvf7jlk2ks5std75k73aralhcf on mantrachaintestnet2\", the response should be:\n\\`\\`\\`json\n{\n    \"symbol\": \"OM\",\n    \"amount\": \"0.0001\",\n    \"toAddress\": \"mantra1pcnw46km8m5amvf7jlk2ks5std75k73aralhcf\",\n    \"chainName\": \"mantrachaintestnet2\"\n\\`\\`\\`\n\nNow respond with a JSON markdown block containing only the extracted values.\n`;\n","import {\n    convertDisplayUnitToBaseUnit,\n    getAssetBySymbol,\n} from \"@chain-registry/utils\";\nimport type { Coin } from \"@cosmjs/stargate\";\nimport { assets } from \"chain-registry\";\nimport { getPaidFeeFromReceipt } from \"../../../shared/helpers/cosmos-transaction-receipt.ts\";\nimport type {\n    ICosmosActionService,\n    ICosmosPluginCustomChainData,\n    ICosmosTransaction,\n    ICosmosWalletChains,\n} from \"../../../shared/interfaces.ts\";\nimport { CosmosTransactionFeeEstimator } from \"../../../shared/services/cosmos-transaction-fee-estimator.ts\";\nimport type { CosmosTransferParams } from \"../types.ts\";\nimport { getAvailableAssets } from \"../../../shared/helpers/cosmos-assets.ts\";\n\nexport class CosmosTransferActionService implements ICosmosActionService {\n    constructor(private cosmosWalletChains: ICosmosWalletChains) {\n        this.cosmosWalletChains = cosmosWalletChains;\n    }\n\n    async execute(\n        params: CosmosTransferParams,\n        customChainAssets?: ICosmosPluginCustomChainData[\"assets\"][]\n    ): Promise<ICosmosTransaction> {\n        const signingCosmWasmClient =\n            this.cosmosWalletChains.getSigningCosmWasmClient(params.chainName);\n\n        const senderAddress = await this.cosmosWalletChains.getWalletAddress(\n            params.chainName\n        );\n\n        if (!senderAddress) {\n            throw new Error(\n                `Cannot get wallet address for chain ${params.chainName}`\n            );\n        }\n\n        if (!params.toAddress) {\n            throw new Error(\"No receiver address\");\n        }\n\n        if (!params.symbol) {\n            throw new Error(\"No symbol\");\n        }\n\n        const availableAssets = getAvailableAssets(assets, customChainAssets);\n\n        const coin: Coin = {\n            denom: getAssetBySymbol(\n                availableAssets,\n                params.symbol,\n                params.chainName\n            ).base,\n            amount: convertDisplayUnitToBaseUnit(\n                availableAssets,\n                params.symbol,\n                params.amount,\n                params.chainName\n            ),\n        };\n\n        const gasFee =\n            await CosmosTransactionFeeEstimator.estimateGasForCoinTransfer(\n                signingCosmWasmClient,\n                senderAddress,\n                params.toAddress,\n                [coin]\n            );\n\n        const txDeliveryResponse = await signingCosmWasmClient.sendTokens(\n            senderAddress,\n            params.toAddress,\n            [coin],\n            { gas: gasFee.toString(), amount: [{ ...coin, amount: gasFee.toString() }] }\n        );\n\n        const gasPaid = getPaidFeeFromReceipt(txDeliveryResponse);\n\n        return {\n            from: senderAddress,\n            to: params.toAddress,\n            gasPaid,\n            txHash: txDeliveryResponse.transactionHash,\n        };\n    }\n}\n","import type {\n    DeliverTxResponse,\n    ExecuteResult,\n} from \"@cosmjs/cosmwasm-stargate\";\n\nconst DEFUALT_EVENTS = [\n    { eventName: \"fee_pay\", attributeType: \"fee\" },\n    { eventName: \"tip_refund\", attributeType: \"tip\" },\n];\n\nexport const getPaidFeeFromReceipt = (\n    receipt: ExecuteResult | DeliverTxResponse,\n    eventsToPickGasFor = DEFUALT_EVENTS\n) => {\n    const selectedEvents = receipt.events.filter(({ type }) =>\n        eventsToPickGasFor.map(({ eventName }) => eventName).includes(type)\n    );\n\n    return selectedEvents.reduce<number>((acc, { attributes }) => {\n        return (\n            acc +\n            attributes.reduce<number>((_acc, { key, value }) => {\n                if (\n                    eventsToPickGasFor.some(\n                        ({ attributeType }) => attributeType === key\n                    )\n                ) {\n                    const testValue = value.match(/\\d+/)?.[0];\n                    const testValueAsNumber = Number(testValue);\n\n                    if (Number.isNaN(testValueAsNumber)) {\n                        return _acc;\n                    }\n\n                    _acc = _acc + testValueAsNumber;\n\n                    return _acc;\n                }\n\n                return _acc;\n            }, 0)\n        );\n    }, 0);\n};\n","import type { SigningCosmWasmClient } from \"@cosmjs/cosmwasm-stargate\";\nimport type { EncodeObject } from \"@cosmjs/proto-signing\";\nimport type { Coin, MsgSendEncodeObject } from \"@cosmjs/stargate\";\n\nexport class CosmosTransactionFeeEstimator {\n    private static async estimateGasForTransaction<\n        Message extends readonly EncodeObject[],\n    >(\n        signingCosmWasmClient: SigningCosmWasmClient,\n        senderAddress: string,\n        message: Message,\n        memo = \"\"\n    ): Promise<number> {\n        const estimatedGas = await signingCosmWasmClient.simulate(\n            senderAddress,\n            message,\n            memo\n        );\n\n        // Add 20% to the estimated gas to make sure we have enough gas to cover the transaction\n        const safeEstimatedGas = Math.ceil(estimatedGas * 1.2);\n\n        return safeEstimatedGas;\n    }\n\n    static estimateGasForCoinTransfer(\n        signingCosmWasmClient: SigningCosmWasmClient,\n        senderAddress: string,\n        recipientAddress: string,\n        amount: readonly Coin[],\n        memo = \"\"\n    ): Promise<number> {\n        return this.estimateGasForTransaction<MsgSendEncodeObject[]>(\n            signingCosmWasmClient,\n            senderAddress,\n            [\n                {\n                    typeUrl: \"/cosmos.bank.v1beta1.MsgSend\",\n                    value: {\n                        fromAddress: senderAddress,\n                        toAddress: recipientAddress,\n                        amount: [...amount],\n                    },\n                },\n            ],\n            memo\n        );\n    }\n}\n","import type { AssetList } from \"@chain-registry/types\";\n\nexport const getAvailableAssets = (\n    assets: AssetList[],\n    customAssets: AssetList[]\n) => {\n    const result: AssetList[] = [];\n    const safeAssets = assets || [];\n    const safeCustomAssets = customAssets || [];\n\n    // Get custom asset chain names for faster lookup\n    const customChainNames = new Set(\n        safeCustomAssets.map(asset => asset.chain_name)\n    );\n\n    // Add non-duplicate assets\n    for (const asset of safeAssets) {\n        if (!customChainNames.has(asset.chain_name)) {\n            result.push(asset);\n        }\n    }\n\n    // Add all custom assets\n    result.push(...safeCustomAssets);\n\n    return result;\n}","import { IAgentRuntime } from \"@elizaos/core\";\nimport {\n    convertBaseUnitToDisplayUnit,\n    getSymbolByDenom,\n} from \"@chain-registry/utils\";\nimport { assets } from \"chain-registry\";\nimport { initWalletChainsData } from \"./utils\";\nimport { ICosmosPluginOptions } from \"../../shared/interfaces\";\nimport { getAvailableAssets } from \"../../shared/helpers/cosmos-assets\";\n\nexport const createCosmosWalletProvider = (\n    pluginOptions: ICosmosPluginOptions\n) => ({\n    get: async (runtime: IAgentRuntime) => {\n        let providerContextMessage = \"\";\n\n        const customAssets = (pluginOptions?.customChainData ?? []).map(\n            (chainData) => chainData.assets\n        );\n\n        const availableAssets = getAvailableAssets(assets, customAssets);\n\n        try {\n            const provider = await initWalletChainsData(runtime);\n\n            for (const [chainName, { wallet }] of Object.entries(\n                provider.walletChainsData\n            )) {\n                const address = await wallet.getWalletAddress();\n                const balances = await wallet.getWalletBalances();\n\n                const convertedCoinsToDisplayDenom = balances.map((balance) => {\n                    const symbol = getSymbolByDenom(\n                        availableAssets,\n                        balance.denom,\n                        chainName\n                    );\n\n                    return {\n                        amount: symbol\n                            ? convertBaseUnitToDisplayUnit(\n                                  availableAssets,\n                                  symbol,\n                                  balance.amount,\n                                  chainName\n                              )\n                            : balance.amount,\n                        symbol: symbol ?? balance.denom,\n                    };\n                });\n\n                const balancesToString = convertedCoinsToDisplayDenom\n                    .map((balance) => `- ${balance.amount} ${balance.symbol}`)\n                    .join(\"\\n\");\n\n                providerContextMessage += `Chain: ${chainName}\\nAddress: ${address}\\nBalances:\\n${balancesToString}\\n________________\\n`;\n            }\n\n            return providerContextMessage;\n        } catch (error) {\n            console.error(\n                \"Error Initializing in Cosmos wallet provider:\",\n                error\n            );\n\n            return null;\n        }\n    },\n});\n","import type { Plugin } from \"@elizaos/core\";\nimport { createTransferAction } from \"./actions/transfer\";\nimport { createCosmosWalletProvider } from \"./providers/wallet\";\nimport { ICosmosPluginOptions } from \"./shared/interfaces\";\n\nexport const createCosmosPlugin = (\n    pluginOptions?: ICosmosPluginOptions\n): Plugin => ({\n    name: \"cosmos\",\n    description: \"Cosmos blockchain integration plugin\",\n    providers: [createCosmosWalletProvider(pluginOptions)],\n    evaluators: [],\n    services: [],\n    actions: [createTransferAction(pluginOptions)],\n});\n\nexport default createCosmosPlugin;\n"],"mappings":"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","names":["chains","assets","assets","assets"]}