{"version":3,"sources":["../src/services/AnyoneClientService.ts","../src/services/AnyoneProxyService.ts","../src/actions/startAnyone.ts","../src/actions/stopAnyone.ts","../src/actions/index.ts","../src/index.ts"],"sourcesContent":["import { Anon } from \"@anyone-protocol/anyone-client\";\n\nexport class AnyoneClientService {\n    private static instance: Anon | null = null;\n\n    static getInstance(): Anon | null {\n        return this.instance;\n    }\n\n    static async initialize(): Promise<void> {\n        if (!this.instance) {\n            this.instance = new Anon({\n                displayLog: true,\n                socksPort: 9050,\n                autoTermsAgreement: true,\n            });\n            await this.instance.start();\n        }\n    }\n\n    static async stop(): Promise<void> {\n        if (this.instance) {\n            await this.instance.stop();\n            this.instance = null;\n        }\n    }\n}\n","import { AnonSocksClient } from \"@anyone-protocol/anyone-client\";\nimport axios from \"axios\";\nimport { AnyoneClientService } from \"./AnyoneClientService\";\n\nexport class AnyoneProxyService {\n    private static instance: AnyoneProxyService | null = null;\n    private sockClient: AnonSocksClient | null = null;\n    private originalAxios: any = null;\n    private originalDefaults: any = null;\n\n    static getInstance(): AnyoneProxyService {\n        if (!AnyoneProxyService.instance) {\n            AnyoneProxyService.instance = new AnyoneProxyService();\n        }\n        return AnyoneProxyService.instance;\n    }\n\n    async initialize(): Promise<void> {\n        await AnyoneClientService.initialize();\n        const anon = AnyoneClientService.getInstance();\n        if (!anon) {\n            throw new Error(\"Anyone client not initialized\");\n        }\n\n        this.sockClient = new AnonSocksClient(anon);\n\n        // Store original axios configuration\n        this.originalDefaults = { ...axios.defaults };\n        this.originalAxios = {\n            request: axios.request,\n            get: axios.get,\n            post: axios.post,\n            put: axios.put,\n            delete: axios.delete,\n            patch: axios.patch,\n        };\n\n        // Create new defaults object instead of modifying existing one\n        axios.defaults = {\n            ...axios.defaults,\n            ...this.sockClient.axios.defaults,\n        };\n\n        // Apply proxy methods\n        axios.request = this.sockClient.axios.request.bind(\n            this.sockClient.axios\n        );\n        axios.get = this.sockClient.axios.get.bind(this.sockClient.axios);\n        axios.post = this.sockClient.axios.post.bind(this.sockClient.axios);\n        axios.put = this.sockClient.axios.put.bind(this.sockClient.axios);\n        axios.delete = this.sockClient.axios.delete.bind(this.sockClient.axios);\n        axios.patch = this.sockClient.axios.patch.bind(this.sockClient.axios);\n    }\n\n    cleanup(): void {\n        if (this.originalAxios && this.originalDefaults) {\n            // Create fresh axios defaults\n            axios.defaults = { ...this.originalDefaults };\n\n            // Create fresh bindings\n            axios.request = this.originalAxios.request.bind(axios);\n            axios.get = this.originalAxios.get.bind(axios);\n            axios.post = this.originalAxios.post.bind(axios);\n            axios.put = this.originalAxios.put.bind(axios);\n            axios.delete = this.originalAxios.delete.bind(axios);\n            axios.patch = this.originalAxios.patch.bind(axios);\n\n            this.originalAxios = null;\n            this.originalDefaults = null;\n        }\n        AnyoneProxyService.instance = null;\n    }\n}\n","import {\n    ActionExample,\n    HandlerCallback,\n    IAgentRuntime,\n    Memory,\n    State,\n    type Action,\n} from \"@elizaos/core\";\nimport { AnyoneClientService } from \"../services/AnyoneClientService\";\nimport { AnyoneProxyService } from \"../services/AnyoneProxyService\";\n\nexport const startAnyone: Action = {\n    name: \"START_ANYONE\",\n    similes: [\"ANYONE\"],\n    validate: async (_runtime: IAgentRuntime, _message: Memory) => {\n        return true;\n    },\n    description: \"Start the Anyone client and proxy service\",\n    handler: async (\n        _runtime: IAgentRuntime,\n        _message: Memory,\n        _state: State,\n        _options: { [key: string]: unknown },\n        _callback: HandlerCallback\n    ): Promise<boolean> => {\n        await AnyoneClientService.initialize();\n        //lint says unused\n        //const anon = AnyoneClientService.getInstance();\n        const proxyService = AnyoneProxyService.getInstance();\n        await proxyService.initialize();\n\n        _callback({\n            text: `Started Anyone`,\n        });\n\n        return true;\n    },\n    examples: [\n        [\n            {\n                user: \"{{user1}}\",\n                content: { text: \"Can you start Anyone for me?\" },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"I'll start Anyone right away\",\n                    action: \"START_ANYONE\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: { text: \"Initialize the Anyone client please\" },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"Starting Anyone now\",\n                    action: \"START_ANYONE\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: { text: \"I need to start using Anyone\" },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"I'll help you start Anyone\",\n                    action: \"START_ANYONE\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: { text: \"Launch Anyone for me\" },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"I'll launch Anyone for you now\",\n                    action: \"START_ANYONE\",\n                },\n            },\n        ],\n    ] as ActionExample[][],\n} as Action;\n","import {\n    ActionExample,\n    HandlerCallback,\n    IAgentRuntime,\n    Memory,\n    State,\n    type Action,\n} from \"@elizaos/core\";\nimport { AnyoneClientService } from \"../services/AnyoneClientService\";\nimport { AnyoneProxyService } from \"../services/AnyoneProxyService\";\n\nexport const stopAnyone: Action = {\n    name: \"STOP_ANYONE\",\n    similes: [\"STOP_PROXY\"],\n    validate: async (_runtime: IAgentRuntime, _message: Memory) => {\n        return true;\n    },\n    description: \"Stop the Anyone client and proxy service\",\n    handler: async (\n        _runtime: IAgentRuntime,\n        _message: Memory,\n        _state: State,\n        _options: { [key: string]: unknown },\n        _callback: HandlerCallback\n    ): Promise<boolean> => {\n        const proxyService = AnyoneProxyService.getInstance();\n        proxyService.cleanup();\n\n        await AnyoneClientService.stop();\n\n        _callback({\n            text: `Stopped Anyone and cleaned up proxy`,\n        });\n\n        return true;\n    },\n    examples: [\n        [\n            {\n                user: \"{{user1}}\",\n                content: { text: \"Can you stop Anyone for me?\" },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"I'll stop Anyone right away\",\n                    action: \"STOP_ANYONE\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: { text: \"Please shut down Anyone\" },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"Stopping Anyone now\",\n                    action: \"STOP_ANYONE\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: { text: \"I need to stop using Anyone\" },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"I'll help you stop Anyone\",\n                    action: \"STOP_ANYONE\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: { text: \"Close Anyone for me\" },\n            },\n            {\n                user: \"{{user2}}\",\n                content: {\n                    text: \"I'll close Anyone for you now\",\n                    action: \"STOP_ANYONE\",\n                },\n            },\n        ],\n    ] as ActionExample[][],\n} as Action;\n","export * from \"./startAnyone.ts\";\nexport * from \"./stopAnyone.ts\";\n","import { Plugin } from \"@elizaos/core\";\nimport { startAnyone } from \"./actions/startAnyone.ts\";\nimport { stopAnyone } from \"./actions/stopAnyone.ts\";\nexport * as actions from \"./actions\";\n\nexport const anyonePlugin: Plugin = {\n    name: \"anyone\",\n    description: \"Proxy requests through Anyone\",\n    actions: [startAnyone, stopAnyone],\n};\n"],"mappings":"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","names":[]}