"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createTransaction = createTransaction;
exports.sendTransaction = sendTransaction;
const web3_js_1 = require("@solana/web3.js");
async function createTransaction(connection, payer, instructions) {
    const recentBlockhash = (await connection.getLatestBlockhash()).blockhash;
    const txMessage = new web3_js_1.TransactionMessage({
        instructions,
        payerKey: payer,
        recentBlockhash: recentBlockhash,
    }).compileToV0Message();
    const versionedTx = new web3_js_1.VersionedTransaction(txMessage);
    return versionedTx;
}
async function sendTransaction(connection, tx) {
    const signature = await connection.sendRawTransaction(tx.serialize());
    await connection.confirmTransaction({
        signature,
        ...(await connection.getLatestBlockhash()),
    });
    return signature;
}
