"use strict";Object.defineProperty(exports, "__esModule", {value: true});var _chunkSGHKGXDYjs = require('./chunk-SGHKGXDY.js');var _chunkCKHLWYSRjs = require('./chunk-CKHLWYSR.js');var _chunk7MX4KGZOjs = require('./chunk-7MX4KGZO.js');var _chunkI6AUFTYSjs = require('./chunk-I6AUFTYS.js');var _chunkAJFV7TTFjs = require('./chunk-AJFV7TTF.js');var _chunkXRXWMM7Ajs = require('./chunk-XRXWMM7A.js');var _chunkEI7MMDWYjs = require('./chunk-EI7MMDWY.js');var _core = require('@goat-sdk/core');var _walletevm = require('@goat-sdk/wallet-evm');var _viem = require('viem');function m(h,n,t,e){var a=arguments.length,o=a<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,n,t,e);else for(var p=h.length-1;p>=0;p--)(d=h[p])&&(o=(a<3?d(o):a>3?d(n,t,o):d(n,t))||o);return a>3&&o&&Object.defineProperty(n,t,o),o}_chunkEI7MMDWYjs.a.call(void 0, m,"_ts_decorate");function i(h,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,n)}_chunkEI7MMDWYjs.a.call(void 0, i,"_ts_metadata");var b="0xAc48FcF1049668B285f3dC72483DF5Ae2162f7e8",g="0x2e8614625226D26180aDf6530C3b1677d3D7cf10",U="0xB5F00c2C5f8821155D8ed27E31932CFD9DB3C5D5",u= exports.a =class{static{_chunkEI7MMDWYjs.a.call(void 0, this,"KimService")}async getSwapRouterAddress(n){return b}async swapExactInputSingleHop(n,t){try{let e=await n.resolveAddress(t.recipient),a=t.amountIn,o=t.amountOutMinimum,d=t.limitSqrtPrice,p=Math.floor(Date.now()/1e3)+t.deadline;return(await n.sendTransaction({to:b,abi:_chunkSGHKGXDYjs.a,functionName:"exactInputSingle",args:[{tokenIn:t.tokenIn,tokenOut:t.tokenOut,recipient:e,deadline:p,amountIn:a,amountOutMinimum:o,limitSqrtPrice:d}]})).hash}catch(e){throw Error(`Failed to swap: ${e}`)}}async swapExactOutputSingleHop(n,t){try{let e=await n.resolveAddress(t.tokenIn),a=await n.resolveAddress(t.tokenOut),o=await n.resolveAddress(t.recipient),d=Number(await n.read({address:t.tokenIn,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"})),p=Number(await n.read({address:t.tokenOut,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"})),y=_viem.parseUnits.call(void 0, t.amountOut,p),F=_viem.parseUnits.call(void 0, t.amountInMaximum,d),O=_viem.parseUnits.call(void 0, t.limitSqrtPrice,96);return(await n.sendTransaction({to:b,abi:_chunkSGHKGXDYjs.a,functionName:"exactOutputSingle",args:[e,a,o,t.deadline,y,F,O]})).hash}catch(e){throw Error(`Failed to swap: ${e}`)}}async swapExactInputMultiHop(n,t){try{let e=await n.resolveAddress(t.recipient),a=Number(await n.read({address:t.path.tokenIn,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"})),o=Number(await n.read({address:t.path.tokenOut,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"})),d=_viem.encodeAbiParameters.call(void 0, [{type:"address[]"},{type:"uint24[]"}],[[t.path.tokenIn,...t.path.intermediateTokens.map(y=>y),t.path.tokenOut],t.path.fees]);return(await n.sendTransaction({to:b,abi:_chunkSGHKGXDYjs.a,functionName:"exactInput",args:[d,e,t.deadline,_viem.parseUnits.call(void 0, t.amountIn,a),_viem.parseUnits.call(void 0, t.amountOutMinimum,o)]})).hash}catch(e){throw new Error(`Failed to swap: ${e}`)}}async swapExactOutputMultiHop(n,t){try{let e=await n.resolveAddress(t.recipient),a=Number(await n.read({address:t.path.tokenIn,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"})),o=Number(await n.read({address:t.path.tokenOut,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"})),d=_viem.encodeAbiParameters.call(void 0, [{type:"address[]"},{type:"uint24[]"}],[[t.path.tokenIn,...t.path.intermediateTokens.map(y=>y),t.path.tokenOut],t.path.fees]);return(await n.sendTransaction({to:b,abi:_chunkSGHKGXDYjs.a,functionName:"exactOutput",args:[d,e,t.deadline,_viem.parseUnits.call(void 0, t.amountOut,o),_viem.parseUnits.call(void 0, t.amountInMaximum,a)]})).hash}catch(e){throw new Error(`Failed to swap: ${e}`)}}async mintPosition(n,t){try{let a=await n.resolveAddress(t.recipient),o=await n.resolveAddress(t.token0),d=await n.resolveAddress(t.token1),p=await n.read({address:U,abi:_chunkI6AUFTYSjs.a,functionName:"getPool",args:[o,d]}),{value:y}=await n.read({address:p,abi:_chunkAJFV7TTFjs.a,functionName:"globalState"}),O=y.tick,q=t.tickLower?t.tickLower:Math.floor(O/60)*60-60*2,v=t.tickUpper?t.tickUpper:Math.floor(O/60)*60+60*2,[L,B]=await Promise.all([n.read({address:t.token0,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"}),n.read({address:t.token1,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"})]),$=_viem.parseUnits.call(void 0, t.amount0Desired,Number(L)),H=_viem.parseUnits.call(void 0, t.amount1Desired,Number(B));return(await n.sendTransaction({to:g,abi:_chunkXRXWMM7Ajs.a,functionName:"mint",args:[{token0:o,token1:d,tickLower:q,tickUpper:v,amount0Desired:$,amount1Desired:H,amount0Min:0,amount1Min:0,recipient:a,deadline:t.deadline}]})).hash}catch(e){throw new Error(`Failed to mint position: ${e}`)}}async increaseLiquidity(n,t){try{let[e,a]=await Promise.all([Number(await n.read({address:t.token0,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"})),Number(await n.read({address:t.token1,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"}))]);return(await n.sendTransaction({to:g,abi:_chunkXRXWMM7Ajs.a,functionName:"increaseLiquidity",args:[{tokenId:t.tokenId,amount0Desired:_viem.parseUnits.call(void 0, t.amount0Desired,e),amount1Desired:_viem.parseUnits.call(void 0, t.amount1Desired,a),amount0Min:_viem.parseUnits.call(void 0, t.amount0Min,e),amount1Min:_viem.parseUnits.call(void 0, t.amount1Min,a),deadline:t.deadline}]})).hash}catch(e){throw new Error(`Failed to increase liquidity: ${e}`)}}async decreaseLiquidity(n,t){try{let[e,a]=await Promise.all([Number(await n.read({address:t.token0,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"})),Number(await n.read({address:t.token1,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"}))]);return(await n.sendTransaction({to:g,abi:_chunkXRXWMM7Ajs.a,functionName:"decreaseLiquidity",args:[{tokenId:t.tokenId,liquidity:_viem.parseUnits.call(void 0, t.liquidity,18),amount0Min:_viem.parseUnits.call(void 0, t.amount0Min,e),amount1Min:_viem.parseUnits.call(void 0, t.amount1Min,a),deadline:t.deadline}]})).hash}catch(e){throw new Error(`Failed to decrease liquidity: ${e}`)}}async collect(n,t){try{let e=await n.resolveAddress(t.recipient),[a,o]=await Promise.all([Number(await n.read({address:t.token0,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"})),Number(await n.read({address:t.token1,abi:_chunk7MX4KGZOjs.a,functionName:"decimals"}))]);return(await n.sendTransaction({to:g,abi:_chunkXRXWMM7Ajs.a,functionName:"collect",args:[{tokenId:t.tokenId,recipient:e,amount0Max:_viem.parseUnits.call(void 0, t.amount0Max,a),amount1Max:_viem.parseUnits.call(void 0, t.amount1Max,o)}]})).hash}catch(e){throw new Error(`Failed to collect: ${e}`)}}async burn(n,t){try{return(await n.sendTransaction({to:g,abi:_chunkXRXWMM7Ajs.a,functionName:"burn",args:[t.tokenId]})).hash}catch(e){throw new Error(`Failed to burn position: ${e}`)}}};m([_core.Tool.call(void 0, {name:"kim_get_swap_router_address",description:"Get the address of the swap router"}),i("design:type",Function),i("design:paramtypes",[typeof _chunkCKHLWYSRjs.a>"u"?Object:_chunkCKHLWYSRjs.a]),i("design:returntype",Promise)],u.prototype,"getSwapRouterAddress",null);m([_core.Tool.call(void 0, {description:"Swap an exact amount of input tokens for a single hop. Make sure tokens are approved for the swap router."}),i("design:type",Function),i("design:paramtypes",[typeof _walletevm.EVMWalletClient>"u"?Object:_walletevm.EVMWalletClient,typeof _chunkCKHLWYSRjs.e>"u"?Object:_chunkCKHLWYSRjs.e]),i("design:returntype",Promise)],u.prototype,"swapExactInputSingleHop",null);m([_core.Tool.call(void 0, {name:"kim_swap_exact_output_single_hop",description:"Swap an exact amount of output tokens for a single hop"}),i("design:type",Function),i("design:paramtypes",[typeof _walletevm.EVMWalletClient>"u"?Object:_walletevm.EVMWalletClient,typeof _chunkCKHLWYSRjs.f>"u"?Object:_chunkCKHLWYSRjs.f]),i("design:returntype",Promise)],u.prototype,"swapExactOutputSingleHop",null);m([_core.Tool.call(void 0, {name:"kim_swap_exact_input_multi_hop",description:"Swap an exact amount of input tokens in multiple hops"}),i("design:type",Function),i("design:paramtypes",[typeof _walletevm.EVMWalletClient>"u"?Object:_walletevm.EVMWalletClient,typeof _chunkCKHLWYSRjs.c>"u"?Object:_chunkCKHLWYSRjs.c]),i("design:returntype",Promise)],u.prototype,"swapExactInputMultiHop",null);m([_core.Tool.call(void 0, {name:"kim_swap_exact_output_multi_hop",description:"Swap tokens to receive an exact amount of output tokens in multiple hops"}),i("design:type",Function),i("design:paramtypes",[typeof _walletevm.EVMWalletClient>"u"?Object:_walletevm.EVMWalletClient,typeof _chunkCKHLWYSRjs.d>"u"?Object:_chunkCKHLWYSRjs.d]),i("design:returntype",Promise)],u.prototype,"swapExactOutputMultiHop",null);m([_core.Tool.call(void 0, {name:"kim_mint_position",description:"Mint a new liquidity position"}),i("design:type",Function),i("design:paramtypes",[typeof _walletevm.EVMWalletClient>"u"?Object:_walletevm.EVMWalletClient,typeof _chunkCKHLWYSRjs.i>"u"?Object:_chunkCKHLWYSRjs.i]),i("design:returntype",Promise)],u.prototype,"mintPosition",null);m([_core.Tool.call(void 0, {name:"kim_increase_liquidity",description:"Increase liquidity in an existing position"}),i("design:type",Function),i("design:paramtypes",[typeof _walletevm.EVMWalletClient>"u"?Object:_walletevm.EVMWalletClient,typeof _chunkCKHLWYSRjs.j>"u"?Object:_chunkCKHLWYSRjs.j]),i("design:returntype",Promise)],u.prototype,"increaseLiquidity",null);m([_core.Tool.call(void 0, {name:"kim_decrease_liquidity",description:"Decrease liquidity in an existing position"}),i("design:type",Function),i("design:paramtypes",[typeof _walletevm.EVMWalletClient>"u"?Object:_walletevm.EVMWalletClient,typeof _chunkCKHLWYSRjs.k>"u"?Object:_chunkCKHLWYSRjs.k]),i("design:returntype",Promise)],u.prototype,"decreaseLiquidity",null);m([_core.Tool.call(void 0, {name:"kim_collect",description:"Collect tokens from a liquidity position"}),i("design:type",Function),i("design:paramtypes",[typeof _walletevm.EVMWalletClient>"u"?Object:_walletevm.EVMWalletClient,typeof _chunkCKHLWYSRjs.l>"u"?Object:_chunkCKHLWYSRjs.l]),i("design:returntype",Promise)],u.prototype,"collect",null);m([_core.Tool.call(void 0, {name:"kim_burn",description:"Burn a liquidity position NFT after all tokens have been collected"}),i("design:type",Function),i("design:paramtypes",[typeof _walletevm.EVMWalletClient>"u"?Object:_walletevm.EVMWalletClient,typeof _chunkCKHLWYSRjs.m>"u"?Object:_chunkCKHLWYSRjs.m]),i("design:returntype",Promise)],u.prototype,"burn",null);exports.a = u;
