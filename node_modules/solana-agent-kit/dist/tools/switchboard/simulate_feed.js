"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.simulate_switchboard_feed = simulate_switchboard_feed;
const constants_1 = require("../../constants");
const common_1 = require("@switchboard-xyz/common");
/**
 * Simulate a switchboard feed
 * @param agent SolanaAgentKit instance
 * @param feed Public key of the feed to simulate as base58
 * @param crossbarUrl The url of the crossbar instance to use
 * @returns Result of the simulation
 */
async function simulate_switchboard_feed(agent, feed, crossbarUrl = constants_1.SWITCHBOARD_DEFAULT_CROSSBAR) {
    try {
        const crossbar = new common_1.CrossbarClient(crossbarUrl, true);
        const results = await crossbar.simulateSolanaFeeds("mainnet", [feed]);
        if (results.length === 0) {
            throw new Error(`Error simulating feed ${feed}. Did you provide the right mainnet feed hash?`);
        }
        return results[0].results.toString();
    }
    catch (error) {
        throw new Error(`Error: ${error.message}`);
    }
}
//# sourceMappingURL=simulate_feed.js.map